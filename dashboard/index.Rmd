---
title: "Police Shootings 1916 â€“ 2021"
output: 
  flexdashboard::flex_dashboard:
    orientation: rows
    vertical_layout: fill
    theme: cerulean
    version: 4
    social: ["twitter", "linkedin"]
    source_code: 'https://github.com/dataforyounz/nz-police-shootings/tree/main'
---

```{r setup, include=FALSE}
library(flexdashboard)
library( dplyr )
library( DT )
library( leaflet )

data_folder <- "dat"
data_file   <- "shooting_data.Rdata"
data_path   <- file.path( data_folder, data_file )

# Load shooting data
load( data_path )

shooting_df <- shooting_df %>% 
               mutate( 
                 fatal_fl = case_when(
                              Outcome.of.Shots.Fired %in% c("Fatal", "Fatal (bystander)", 
                                                          "Fatal-cause unconfirmed") ~ 1,
                              TRUE ~ 0
                            ),
                 non_fatal_fl = case_when(
                              Outcome.of.Shots.Fired %in% c("Non-fatal injury", "Non-fatal injury (offender)", 
                                                          "Non-fatal injury (bystander)") ~ 1,
                              TRUE ~ 0
                            )
               )
               
                         

# Measures
total_shootings <- nrow( shooting_df )
total_fatal     <- nrow( shooting_df %>% filter( fatal_fl == 1) )
total_non_fatal <- nrow( shooting_df %>% filter( non_fatal_fl == 1) )

```

About
===================================================================

#### About this dashbaord

---

Link to data 

Last updated: `r format(Sys.Date(), "%d/%m/%Y")`

---

Shootings 
===================================================================

Row
--------------------------------- 

### 

```{r }
flexdashboard::valueBox( value = total_shootings, 
                         caption = "Total Police Shootings", 
                         icon = "fa-info")
```

###

```{r}
flexdashboard::valueBox( value = total_fatal, 
                         caption = "Total Fatal Shootings",
                         icon = "fa-info")
```

###

```{r}
flexdashboard::valueBox( value = total_non_fatal, 
                         caption = "Total Non-Fatal Shootings",
                         icon = "fa-info" )
```


Row
--------------------------------- 

### Chart A

```{r}

leaflet() %>% addTiles()

```

### Chart B

```{r}



```

Data 
===================================================================

#### Use the buttons below to export the data

### 

```{r}

datatable( shooting_df )

```

